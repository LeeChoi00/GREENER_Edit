<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="commentMapper">
	<resultMap type="Comment" id="commentResultMap">
  	<id column="COMMENT_NO" property="commentNo"/>
  	
  	<result column="COMMENT_DATE" property="commentDate"/>
  	<result column="COMMENT_CONTENT" property="commentContent"/>
  	<result column="COMMENT_WRITER" property="commentWriter"/>
  	<result column="BOARD_NO" property="boardNo"/>
  	<result column="COMMENT_STATUS" property="commentStatus"/>
  	<result column="NICKNAME" property="nickName"/>
	</resultMap>
	
	<!-- 게시물 댓글 정보 가져가기 -->
	<select id="selectBoardComments" resultMap="commentResultMap">
		select *
		from comment_tb
			join member on(comment_writer = user_id)
		where board_no = #{bNo}
	</select>
	
	
	<!-- ajax로 댓글 작성-->
	<!-- 1. 댓글 저장 -->
	<insert id="insertComment">
		insert into comment_tb
		values(seq_cno.nextval, sysdate, #{commentContent}, #{commentWriter}, #{boardNo}, 'Y')
	</insert>
	
	<!-- 2. 댓글 리스트 가져오기 -->
	<select id="selectCommentList" resultMap="commentResultMap">
		select *
		from comment_tb
		where board_no = #{boardNo} and comment_status = 'Y'
	</select>
	

</mapper>
